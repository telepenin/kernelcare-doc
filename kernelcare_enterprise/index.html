<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>KernelCare.ePortal | Documentation</title>
    <meta name="description" content="Kernelcare documentation">
    
    
    <link rel="preload" href="/assets/css/0.styles.8ca6b66c.css" as="style"><link rel="preload" href="/assets/js/app.bcc46952.js" as="script"><link rel="preload" href="/assets/js/15.ca99983e.js" as="script"><link rel="preload" href="/assets/js/5.21f72955.js" as="script"><link rel="prefetch" href="/assets/js/1.8353e851.js"><link rel="prefetch" href="/assets/js/10.a940ac69.js"><link rel="prefetch" href="/assets/js/11.d9febe8e.js"><link rel="prefetch" href="/assets/js/12.983230c7.js"><link rel="prefetch" href="/assets/js/13.cd26059b.js"><link rel="prefetch" href="/assets/js/14.348feee3.js"><link rel="prefetch" href="/assets/js/16.657d8b7f.js"><link rel="prefetch" href="/assets/js/17.40792003.js"><link rel="prefetch" href="/assets/js/18.44423953.js"><link rel="prefetch" href="/assets/js/19.6ecccafe.js"><link rel="prefetch" href="/assets/js/2.78f29c86.js"><link rel="prefetch" href="/assets/js/20.a7ced964.js"><link rel="prefetch" href="/assets/js/21.aa9e39aa.js"><link rel="prefetch" href="/assets/js/22.abf3e90c.js"><link rel="prefetch" href="/assets/js/23.9d9d3823.js"><link rel="prefetch" href="/assets/js/24.6764129a.js"><link rel="prefetch" href="/assets/js/25.4d861c70.js"><link rel="prefetch" href="/assets/js/26.a3679a4d.js"><link rel="prefetch" href="/assets/js/27.4aefa8c5.js"><link rel="prefetch" href="/assets/js/28.485cf69a.js"><link rel="prefetch" href="/assets/js/29.50425836.js"><link rel="prefetch" href="/assets/js/30.ee4e9568.js"><link rel="prefetch" href="/assets/js/31.8b89124e.js"><link rel="prefetch" href="/assets/js/32.80f524d1.js"><link rel="prefetch" href="/assets/js/33.4f17a919.js"><link rel="prefetch" href="/assets/js/34.7b56bd5d.js"><link rel="prefetch" href="/assets/js/35.b4e0a3ab.js"><link rel="prefetch" href="/assets/js/36.5612976e.js"><link rel="prefetch" href="/assets/js/37.98a5f53f.js"><link rel="prefetch" href="/assets/js/38.b8b32cfd.js"><link rel="prefetch" href="/assets/js/39.7b868cda.js"><link rel="prefetch" href="/assets/js/40.5a94e4e7.js"><link rel="prefetch" href="/assets/js/41.2052311d.js"><link rel="prefetch" href="/assets/js/42.db099ae3.js"><link rel="prefetch" href="/assets/js/43.b19f8a61.js"><link rel="prefetch" href="/assets/js/44.77f56898.js"><link rel="prefetch" href="/assets/js/45.054e8dc3.js"><link rel="prefetch" href="/assets/js/6.2a3a7c8f.js"><link rel="prefetch" href="/assets/js/7.212af394.js"><link rel="prefetch" href="/assets/js/8.6a40905c.js"><link rel="prefetch" href="/assets/js/9.e4334b9c.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.c6ce7e22.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8ca6b66c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/kc-logo.svg" alt="Documentation" class="logo"> <span class="site-name can-hide">Documentation</span></a> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value="Search"> <!----></div> <div class="links" style="max-width:nullpx;"><a href="https://cloudlinux.com/kernelcare-free-trial5" target="_blank" class="btn">
      Try Free
    </a> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kernelcare_enterprise/" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/ru/kernelcare_enterprise/" class="nav-link">Русский</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kernelcare_enterprise/" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/ru/kernelcare_enterprise/" class="nav-link">Русский</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Content</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/installation/" class="sidebar-link">Installation of KernelCare</a></li><li><a href="/settings/" class="sidebar-link">Basic Management</a></li><li><a href="/command_line/" class="sidebar-link">Command Line Tools</a></li><li><a href="/config_options/" class="sidebar-link">Config Options</a></li><li><a href="/disabling_some_patches/" class="sidebar-link">Disabling Some Patches</a></li><li><a href="/delayed_feed/" class="sidebar-link">Delayed Feed</a></li><li><a href="/extra_patchse/" class="sidebar-link">Extra Patchset</a></li><li><a href="/sticky_patches/" class="sidebar-link">Sticky Patches</a></li><li><a href="/nagios_plugin/" class="sidebar-link">Nagios Plugin</a></li><li><a href="/zabbix_template/" class="sidebar-link">Zabbix Template</a></li><li><a href="/upgrade/" class="sidebar-link">Upgrade</a></li><li><a href="/uninsta/" class="sidebar-link">Uninstall KernelCare</a></li><li><a href="/technology/" class="sidebar-link">Technology</a></li><li><a href="/reseller_partner_ui/" class="sidebar-link">Reseller Partner UI</a></li><li><a href="/kernelcare_enterprise/" class="active sidebar-link">KernelCare.ePortal</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#installation" class="sidebar-link">Installation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#kernelcare-eportal-on-el6" class="sidebar-link">KernelCare.ePortal on EL6</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#kernelcare-eportal-on-el7" class="sidebar-link">KernelCare.ePortal on EL7</a></li></ul></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#managing-users" class="sidebar-link">Managing Users</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#ldap-authorization" class="sidebar-link">LDAP authorization</a></li></ul></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#accessing-eportal" class="sidebar-link">Accessing ePortal</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#patchset-deployment" class="sidebar-link">PatchSet Deployment</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#managing-keys" class="sidebar-link">Managing Keys</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#managing-servers" class="sidebar-link">Managing Servers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#managing-script" class="sidebar-link">Managing Script</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#script-to-unroll-patchsets" class="sidebar-link">Script to unroll patchsets</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#script-to-determine-the-number-of-servers-under-the-management-of-eportal-per-key" class="sidebar-link">Script to determine the number of servers under the management of ePortal, per key</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#script-to-automatically-install-latest-patchsets" class="sidebar-link">Script to automatically install latest patchsets</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#unroll-patches-from-ui" class="sidebar-link">Unroll patches from UI</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#show-extended-check-in-statistics-in-admin-ui" class="sidebar-link">Show extended check-in statistics in admin UI</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#ability-to-create-read-only-users" class="sidebar-link">Ability to create read-only users</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#feed-management" class="sidebar-link">Feed Management</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#adding-extra-tag-field" class="sidebar-link">Adding extra Tag field</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#how-to-setup-eportal-to-use-https" class="sidebar-link">How to setup ePortal to use HTTPS</a></li></ul></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#deploying-kernelcare" class="sidebar-link">Deploying kernelcare</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#kernelcare-client-config-file" class="sidebar-link">KernelCare client config file</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#changing-eportal-ip" class="sidebar-link">Changing ePortal IP</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#configuration-locations" class="sidebar-link">Configuration &amp; locations</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#stopping-starting" class="sidebar-link">Stopping &amp; Starting</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#kernelcare-eportal-on-el6-2" class="sidebar-link">KernelCare.ePortal on EL6</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#kernelcare-eportal-on-el7-2" class="sidebar-link">KernelCare.ePortal on EL7</a></li></ul></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#log-files" class="sidebar-link">Log Files</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#eportal-api" class="sidebar-link">ePortal API</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#nagios-zabbix-support" class="sidebar-link">Nagios &amp; Zabbix support</a></li></ul></li><li><a href="/kcare-nexpose/" class="sidebar-link">Kcare-nexpose</a></li><li><a href="/kernelcare_whmcs_plugin/" class="sidebar-link">KernelCare WHMCS Plugin</a></li><li><a href="/proxy_settings/" class="sidebar-link">Firewall and Proxy Settings</a></li><li><a href="/eol_ubuntu_lts_kernels_suppor/" class="sidebar-link">EOL Ubuntu LTS kernels support</a></li><li><a href="/downloading_documentation/" class="sidebar-link">Downloading Documentation</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="kernelcare-eportal"><a href="#kernelcare-eportal" aria-hidden="true" class="header-anchor">#</a> KernelCare.ePortal</h1> <p>KernelCare.ePortal is a web management console for KernelCare for servers located behind the firewall, with no internet access. It is part of KernelCare Enterprise offering, and should be installed on premisses</p> <h2 id="installation"><a href="#installation" aria-hidden="true" class="header-anchor">#</a> Installation</h2> <h3 id="kernelcare-eportal-on-el6"><a href="#kernelcare-eportal-on-el6" aria-hidden="true" class="header-anchor">#</a> KernelCare.ePortal on EL6</h3> <p>To install KernelCare.ePortal, start with the minimal image of EL6</p> <p>For installation and workability of e-portal nginx web server is required. We recommend to use a stable version from the official nginx repository:</p> <div class="language- extra-class"><pre class="language-text"><code>$ cat &gt; /etc/yum.repos.d/nginx.repo &lt;&lt;EOL
[nginx]
name=nginx repo
baseurl=http://nginx.org/packages/centos/6/\$basearch/
gpgcheck=0
enabled=1
EOL
</code></pre></div><p>Please find more information at <a href="http://nginx.org/en/linux_packages.html#stable" target="_blank" rel="noopener noreferrer">http://nginx.org/en/linux_packages.html#stable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Setup KernelCare.ePortal repo:</p> <div class="language- extra-class"><pre class="language-text"><code>$ cat &gt; /etc/yum.repos.d/kcare-eportal.repo &lt;&lt;EOL
[kcare-eportal]
name=kcare-eportal
baseurl=http://repo.eportal.kernelcare.com/x86_64/
gpgkey=http://repo.cloudlinux.com/kernelcare-debian/6/conf/kcaredsa_pub.gpg
enabled=1
gpgcheck=1
EOL
</code></pre></div><p>Install KernelCare.eportal:</p> <div class="language- extra-class"><pre class="language-text"><code>$ yum install kcare-eportal
</code></pre></div><h3 id="kernelcare-eportal-on-el7"><a href="#kernelcare-eportal-on-el7" aria-hidden="true" class="header-anchor">#</a> KernelCare.ePortal on EL7</h3> <p>To install KernelCare.ePortal, start with the minimal image of EL7</p> <p>For installation and workability of e-portal nginx web server is required. We recommend to use stable version from the official nginx repository:</p> <div class="language- extra-class"><pre class="language-text"><code>$ cat &gt; /etc/yum.repos.d/nginx.repo &lt;&lt;EOL
[nginx]
name=nginx repo
baseurl=http://nginx.org/packages/centos/7/\$basearch/
gpgcheck=0
enabled=1
EOL
</code></pre></div><p>Please find more information at <a href="http://nginx.org/en/linux_packages.html#stable" target="_blank" rel="noopener noreferrer">http://nginx.org/en/linux_packages.html#stable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Setup KernelCare.ePortal repo:</p> <div class="language- extra-class"><pre class="language-text"><code>$ cat &gt; /etc/yum.repos.d/kcare-eportal.repo &lt;&lt;EOL
[kcare-eportal]
name=KernelCare ePortal
baseurl=https://repo.eportal.kernelcare.com/x86_64.el7/
enabled=1
gpgkey=https://repo.cloudlinux.com/kernelcare/RPM-GPG-KEY-KernelCare
gpgcheck=1
EOL
</code></pre></div><p>Install KernelCare.eportal:</p> <div class="language- extra-class"><pre class="language-text"><code>$ yum install kcare-eportal
</code></pre></div><h2 id="managing-users"><a href="#managing-users" aria-hidden="true" class="header-anchor">#</a> Managing Users</h2> <p>You can manage portal using /usr/bin/kc.eportal utility:</p> <div class="language- extra-class"><pre class="language-text"><code>-l | --list-users      : list all users
-a | --add-user        : add a user
-d | --delete-user     : delete a user
-c | --change-password : change a user password
-p | --password        : provide a password for a user
-h | --help            : show this help
</code></pre></div><p>To add a user:</p> <div class="language- extra-class"><pre class="language-text"><code>$ kc.eportal -a admin -p AdminPassword
</code></pre></div><p>To change user's password:</p> <div class="language- extra-class"><pre class="language-text"><code>$ kc.eportal -c admin -p NewPassword
</code></pre></div><h3 id="ldap-authorization"><a href="#ldap-authorization" aria-hidden="true" class="header-anchor">#</a> LDAP authorization</h3> <p>It is possible to support a secure connection. To do so, specify the right format of connection string as a key to enter user login.</p> <p>For example:</p> <p><code>uid=%s,dc=example,dc=com</code></p> <p><strong>Note.</strong> This key is a must in a connection string and should include ‘%s’</p> <p>You are also able to specify security settings and set-up timeouts using LDAP URL.</p> <h2 id="accessing-eportal"><a href="#accessing-eportal" aria-hidden="true" class="header-anchor">#</a> Accessing ePortal</h2> <p>To access KernelCare.eportal management console, connect to:
<a href="http://YOUR_IP/admin" target="_blank" rel="noopener noreferrer">http://YOUR_IP/admin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>And enter your login &amp; password</p> <p><img src="https://docs.kernelcare.com/access_eportal.png" alt>
You can manage your login information using <a href="/kernelcare_enterprise/#managing-users">kc.eportal tool</a> .</p> <h2 id="patchset-deployment"><a href="#patchset-deployment" aria-hidden="true" class="header-anchor">#</a> PatchSet Deployment <span class="badge tip top" data-v-099ab69c>ePortal 0.8+</span></h2> <p>KernelCare.ePortal has built-in mechanism to download latest patches. To start using it, click on ‘Patch Source’ link in KernelCare.ePortal navigational bar. Your patch source access info will be provided by your KernelCare representative.</p> <p><img src="https://docs.kernelcare.com/eportal_dep01.jpg" alt></p> <p>Once you set up patch source access info, you will get to a list of available patchsets. You can always go back &amp; change your access info by clicking on ‘Source’ link.</p> <p><img src="https://docs.kernelcare.com/eportal_dep02_zoom87.png" alt>
Clicking on [changelog] will provide changelog for given patchset.
Clicking on [deploy this patch, and all before it] will download and deploy this patchset and all the patchsets above. It is impossible to deploy patchsets out of order.</p> <h2 id="managing-keys"><a href="#managing-keys" aria-hidden="true" class="header-anchor">#</a> Managing Keys</h2> <p>To register new servers you need to create a KernelCare key used for the registration.
Click <em>Add</em> button, so a new registration key will be automatically generated and shown in the list below.</p> <p><img src="https://docs.kernelcare.com/hmfile_hash_13c22427.png" alt>
The key itself will be used as part of the registration command on individual server. You can provide a description for the key, as well as max servers that can be registered under that key.
Removing the key would remove all servers under the key.</p> <p>Clicking on the key would let you see the information about <a href="/kernelcare_enterprise#managing-servers">servers registered</a> under that key, as well as remove servers.</p> <h2 id="managing-servers"><a href="#managing-servers" aria-hidden="true" class="header-anchor">#</a> Managing Servers</h2> <p>You can see servers belonging to the key by clicking on the key itself in <a href="/kernelcare_enterprise#managing-keys">Managing Keys</a> interface.</p> <p><img src="https://docs.kernelcare.com/server_list.png" alt>
The screen shows servers registered under the key, their IP, hostname, effective kernel as well as the time of registration and last check in.</p> <h3 id="managing-script"><a href="#managing-script" aria-hidden="true" class="header-anchor">#</a> Managing Script</h3> <p><strong><em>Note.</em></strong> If scripts do not work on your ePortal, you might need to update ePortal first. To update ePortal, please run the following command:</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; yum update kcare-eportal
</code></pre></div><p>To view the list of all servers IDs that are connected to the particular key, do the following:
In the UI go to the page with the list of keys. Then click the particular key. The list of servers connected to this key will be displayed.</p> <p>To view the list of all servers IDs that are not connected to any key, do the following:
In the UI go to the page with the list of keys. Then click <em>Reset filters</em> button.
OR just follow this URL <em>http://EPORTAL_IP/admin/kcserver/.</em></p> <h3 id="script-to-unroll-patchsets"><a href="#script-to-unroll-patchsets" aria-hidden="true" class="header-anchor">#</a> Script to unroll patchsets</h3> <p>To unroll patchset run:</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; kc.eportal --unroll 16012017_1
</code></pre></div><h3 id="script-to-determine-the-number-of-servers-under-the-management-of-eportal-per-key"><a href="#script-to-determine-the-number-of-servers-under-the-management-of-eportal-per-key" aria-hidden="true" class="header-anchor">#</a> Script to determine the number of servers under the management of ePortal, per key</h3> <p>To see pairs of key/number of servers run:</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; kc.eportal --list-servers

Count | Key
----- + --------------------------------
    0 | 2shcolu7Y1x6885Q
    2 | 6J89aS44j6OmTr05
</code></pre></div><h3 id="script-to-automatically-install-latest-patchsets"><a href="#script-to-automatically-install-latest-patchsets" aria-hidden="true" class="header-anchor">#</a> Script to automatically install latest patchsets</h3> <p>It determines if latest patches are available and installs them.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;kc.eportal --get-latest
</code></pre></div><h3 id="unroll-patches-from-ui"><a href="#unroll-patches-from-ui" aria-hidden="true" class="header-anchor">#</a> Unroll patches from UI</h3> <p>In the patch-source page, there is a list of available patches. To unroll patches click the button _ Roll back this patch, and all after it._
Use it to roll back the patch and all the following patches.</p> <h3 id="show-extended-check-in-statistics-in-admin-ui"><a href="#show-extended-check-in-statistics-in-admin-ui" aria-hidden="true" class="header-anchor">#</a> Show extended check-in statistics in admin UI</h3> <p>A new table is added to the starting page. This table displays the following:
Total number of servers.
Number of servers that checked in for the past 48 hours.</p> <p>The number of servers for each key is listed in the <em>Key Inventory</em> table.</p> <h3 id="ability-to-create-read-only-users"><a href="#ability-to-create-read-only-users" aria-hidden="true" class="header-anchor">#</a> Ability to create read-only users</h3> <div class="language- extra-class"><pre class="language-text"><code>[root@localhost ~]# kc.eportal -l
Num | Username
--- + --------------------------------
  1 | admin
  2 | user
[root@localhost ~]# kc.eportal -r user
User 'user' is now readonly
</code></pre></div><h3 id="feed-management"><a href="#feed-management" aria-hidden="true" class="header-anchor">#</a> Feed Management</h3> <p>Feeds are intended to manage patchsets on the server, and they provide a possibility to bind a set of patches to a specific key. Possible use cases: for preliminary testing of patches, for applying updates to groups of servers with the similar hardware, etc.</p> <p>To get into Feeds Management interface go to Settings → Feeds:</p> <p><img src="https://docs.kernelcare.com/feedmanagement1_zoom70.png" alt></p> <p>On this page a user can manage the existing feeds: create, delete, edit.</p> <p><img src="https://docs.kernelcare.com/feedmanagement2_zoom70.png" alt></p> <p>Available options:
Name — a name of a feed.
Auto update — enable and disable automatic downloading of patches to this feed.
Deploy after X hours — a delay in hours between the moment the patchset is available for deployment and the moment it is installed to the feed.</p> <p>Every 10 minutes ePortal checks for new patches on the main patch server. If a new patch is available, it is uploaded to the ePortal server. Note: it is uploaded but is not deployed. The patch availability time is considered starting from the moment a new patch appears on the ePortal, and that time is taken into account in <em>Deploy after X hours _ option <em>.</em> So, if a user sets _ Deploy after X hours = 10</em> , the patch will be deployed to the feed 10 hours after it has been downloaded to the ePortal server.</p> <p>To make the feed auto-update immediately (so that, new patches are loaded to the feed immediately after they are available on ePortal), set <em>Deploy after X hours = 0.</em></p> <p>A special case is a clean installation when ePortal is installed on a new server (there aren't any downloaded archives with patches and feeds with deployed patchsets, including default feed). In this case, if a user creates a new feed and sets Deployed after X hours option right away, then all patches (from the oldest to the latest available) will be deployed to the feed after the specified X hours. This is because the archives are downloaded from scratch and will be considered as “just appeared on ePortal” — that is, all patches will have the same appearance time on ePortal from which the option Deploy after X hours will repel.</p> <p><img src="https://docs.kernelcare.com/feedmanagement3_zoom70.png" alt></p> <p>On the main ePortal page, a user can set the corresponding key &lt;&gt; feed pair. This is done in the key creation interface or when editing a key.</p> <p><img src="https://docs.kernelcare.com/feedmanagement4_zoom70.png" alt></p> <p>By default, a new key is bound to the default feed, alternatively, a user can choose a desired feed from the drop-down menu.</p> <p><img src="https://docs.kernelcare.com/feedmanagement5_zoom70.png" alt></p> <p>Note that when removing a feed all keys attached to this feed will be moved to the default feed.</p> <p><img src="https://docs.kernelcare.com/feedmanagement6_zoom70.png" alt></p> <h3 id="adding-extra-tag-field"><a href="#adding-extra-tag-field" aria-hidden="true" class="header-anchor">#</a> Adding extra Tag field</h3> <p>To add an extra Tag field for the server, run:</p> <div class="language- extra-class"><pre class="language-text"><code>kcarectl --tag command
</code></pre></div><p>where <em>command</em> is a parameter defined by a user. This parameter will be displayed in UI for the server. User could add multiple tags for each server. Each tag should be separated with ‘;’ symbol.</p> <p>Example:</p> <div class="language- extra-class"><pre class="language-text"><code>kcarectl --tag “env:prod;ubuntu”
</code></pre></div><p>This server has two tags : <em>env:prod</em> and <em>ubuntu</em> .</p> <p><em>env:prod</em> is a parameter that has tag name <em>env</em> and the value <em>prod.</em></p> <p><img src="https://docs.kernelcare.com/addingextratagfield_zoom88.png" alt></p> <p>To remove all tags from a particular server, run:</p> <div class="language- extra-class"><pre class="language-text"><code>kcarectl --tag &quot;&quot;
</code></pre></div><p>Where ''&quot; is a parameter to delete the previously defined tag.</p> <h3 id="how-to-setup-eportal-to-use-https"><a href="#how-to-setup-eportal-to-use-https" aria-hidden="true" class="header-anchor">#</a> How to setup ePortal to use HTTPS</h3> <p>Some assumptions for a server where e-portal is deployed:</p> <ol><li>A firewall is disabled for 443 port.</li> <li>Private and public keys are downloaded on the server.</li></ol> <p>Edit ssl configuration template according to your certificates:</p> <div class="language- extra-class"><pre class="language-text"><code>mv /etc/nginx/eportal.ssl.conf.example /etc/nginx/eportal.ssl.conf
vi /etc/nginx/eportal.ssl.conf
</code></pre></div><p>Include this configuration into the main one:</p> <div class="language- extra-class"><pre class="language-text"><code>sed -e '3iinclude eportal.ssl.conf;' -i /etc/nginx/conf.d/eportal.conf
</code></pre></div><p>Restart nginx:</p> <div class="language- extra-class"><pre class="language-text"><code>service nginx restart
</code></pre></div><p>In order to communicate with e-portal, updated to https, you need to modify KernelCare config files on all the servers if they have IPs hardcoded servers settings.</p> <p>To do that, update PATCH_SERVER and REGISTRATION_URL environment variables:</p> <div class="language- extra-class"><pre class="language-text"><code>vi /etc/sysconfig/kcare/kcare.conf
</code></pre></div><p>So, after editing your <em>/etc/sysconfig/kcare/kcare.conf</em> should contain updated PATCH_SERVER and REGISTRATION_URL environment variables like in the example below:</p> <div class="language- extra-class"><pre class="language-text"><code>PATCH_SERVER=https://eportal_domain_name/
REGISTRATION_URL=https://eportal_domain_name/admin/api/kcare
</code></pre></div><p>The following example demonstrates how to connect new servers to e-portal configured for https:</p> <div class="language- extra-class"><pre class="language-text"><code>$ export KCARE_PATCH_SERVER=https://eportal_domain_name/
$ export KCARE_REGISTRATION_URL=https://eportal_domain_name/admin/api/kcare
$ export KCARE_MAILTO=admin@mycompany.com
$ curl -s https://repo.cloudlinux.com/kernelcare/kernelcare_install.sh | bash
$ /usr/bin/kcarectl --register key_from_your_eportal
</code></pre></div><h2 id="deploying-kernelcare"><a href="#deploying-kernelcare" aria-hidden="true" class="header-anchor">#</a> Deploying kernelcare</h2> <p>To deploy kernelcare client software to use ePortal, following enviornment variables should be setup prior to RPM install:</p> <table><thead><tr><th>Environment Variable</th> <th>Value</th> <th>Description</th></tr></thead> <tbody><tr><td>KCARE_PATCH_SERVER</td> <td>http://eportal_ip/</td> <td>URL to a server from which patches will be downloaded</td></tr> <tr><td>KCARE_REGISTRATION_URL</td> <td>http://eportal_ip/admin/api/kcare</td> <td>URL to ePortal's api</td></tr> <tr><td>KCARE_MAILTO [2.5+]</td> <td>email@address</td> <td>Email to receive all notifications related to failed KernelCare updates. Used in /etc/cron.d/kcare-cron</td></tr></tbody></table> <p>Example:</p> <div class="language- extra-class"><pre class="language-text"><code>$ export KCARE_PATCH_SERVER=http://10.1.10.115/
$ export KCARE_REGISTRATION_URL=http://10.1.10.115/admin/api/kcare
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>$ export 
$ curl -s https://repo.cloudlinux.com/kernelcare/kernelcare_install.sh | bash
$ kcarectl --register r72fF838Q47oWigj
</code></pre></div><h2 id="kernelcare-client-config-file"><a href="#kernelcare-client-config-file" aria-hidden="true" class="header-anchor">#</a> KernelCare client config file</h2> <p>KernelCare client configuration file is located in /etc/sysconfig/kcare/kcare.conf</p> <p>Example:</p> <div class="language- extra-class"><pre class="language-text"><code>AUTO_UPDATE=True
PATCH_SERVER=http://10.1.10.115/
REGISTRATION_URL=http://10.1.10.115/admin/api/kcare
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>If <code>AUTO_UPDATE</code> set to true, KernelCare client will check in every 4 hours, and try to download and apply latest patches</p></div> <p>PATCH_SERVER -- server from which patches will be downloaded</p> <p>REGISTRATION_URL -- URL used to register/unregister server</p> <h2 id="changing-eportal-ip"><a href="#changing-eportal-ip" aria-hidden="true" class="header-anchor">#</a> Changing ePortal IP</h2> <p>You can change ePortal IP at any moment, but you need to modify KernelCare config files on all the servers if they have IPs hardcoded.
To do that, edit: /etc/sysconfig/kcare/kcare.conf</p> <p>Change:</p> <div class="language- extra-class"><pre class="language-text"><code>PATCH_SERVER=http://10.1.10.115/
REGISTRATION_URL=http://10.1.10.115/admin/api/kcare
</code></pre></div><p>To point to the right location.</p> <h2 id="configuration-locations"><a href="#configuration-locations" aria-hidden="true" class="header-anchor">#</a> Configuration &amp; locations</h2> <p>Web Server (nginx) configuration is located at /etc/nginx/conf.d/eportal.conf</p> <p>Database (sqlite) is stored in /usr/share/kcare-eportal/data.sqlite
To reset database:</p> <div class="language- extra-class"><pre class="language-text"><code>$ rm /usr/share/kcare-eportal/data.sqlite
$ cd /usr/share/kcare-eportal &amp;&amp; python createdb.py
</code></pre></div><p>Client access data file used to decide if server has access to the patches is stored in /usr/share/kcare-eportal/kcare_servers.htpasswd</p> <p>Patches are stored in: /usr/share/kcare-eportal/patches</p> <h2 id="stopping-starting"><a href="#stopping-starting" aria-hidden="true" class="header-anchor">#</a> Stopping &amp; Starting</h2> <h3 id="kernelcare-eportal-on-el6-2"><a href="#kernelcare-eportal-on-el6-2" aria-hidden="true" class="header-anchor">#</a> KernelCare.ePortal on EL6</h3> <p>To stop/start/reload/restart configuration of nginx server:</p> <div class="language- extra-class"><pre class="language-text"><code>$ /etc/init.d/nginx stop|start|reload|restart
</code></pre></div><p>To stop/start/restart ePortal (Python):</p> <div class="language- extra-class"><pre class="language-text"><code>$ /etc/init.d/uwsgi stop|start|restart
</code></pre></div><h3 id="kernelcare-eportal-on-el7-2"><a href="#kernelcare-eportal-on-el7-2" aria-hidden="true" class="header-anchor">#</a> KernelCare.ePortal on EL7</h3> <p>To stop/start/reload/restart configuration of nginx server:</p> <div class="language- extra-class"><pre class="language-text"><code>$ systemctl stop|start|reload|restart nginx
</code></pre></div><p>To stop/start/restart ePortal (Python):</p> <div class="language- extra-class"><pre class="language-text"><code>$ systemctl stop|start|restart emperor.uwsgi
</code></pre></div><h2 id="log-files"><a href="#log-files" aria-hidden="true" class="header-anchor">#</a> Log Files</h2> <p>ePortal messages/errors:
/var/log/uwsgi/uwsgi-emperor.log</p> <p>nginx ePortal access log:
/var/log/nginx/kcare-eportal.log</p> <p>nginx error log:
/var/log/nginx/error_log</p> <h2 id="eportal-api"><a href="#eportal-api" aria-hidden="true" class="header-anchor">#</a> ePortal API <span class="badge tip top" data-v-099ab69c>ePortal 0.9+</span></h2> <p>KernelCare.ePortal provides limited API to remove servers based on key &amp; IP.</p> <p>To access the API, first setup API token used for authentication:</p> <p><code>echo your_token &gt; /usr/share/kcare-eportal/config/api.token</code></p> <p>API method: <code>unregister_by_key.plain</code></p> <p>Parameters:</p> <p>key - KernelCare.ePortal key under which server is registered;
IP - remote server IP as displayed in KernelCare.ePortal;
token - API token.</p> <p>Example:</p> <p><a href="https://ePortal_url/admin/api/kcare/unregister_by_key.plain?key=2M6gmIS6fHh39aF2&ip=10.1.10.74&token=your_token" target="_blank" rel="noopener noreferrer">https://ePortal_url/admin/api/kcare/unregister_by_key.plain?key=2M6gmIS6fHh39aF2&amp;ip=10.1.10.74&amp;token=your_token<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Return code: int
-3 API token file does not exist;
-2 API token doesn't match;
-1 Internal error, see /var/log/uwsgi/uwsgi-emperor.log for details;
any other number - number of servers removed.</p> <h2 id="nagios-zabbix-support"><a href="#nagios-zabbix-support" aria-hidden="true" class="header-anchor">#</a> Nagios &amp; Zabbix support</h2> <p>KernelCare.ePortal since version 1.2 supports server monitoring similar to <a href="/nagios_plugin/">Nagios</a> &amp; <a href="/zabbix_template/">Zabbix</a> monitoring.</p> <p>You can curl the API directly to receive the information:</p> <p><a href="https://yourserver/admin/api/kcare/nagios/KCAREKEY" target="_blank" rel="noopener noreferrer">https://yourserver/admin/api/kcare/nagios/KCAREKEY<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>or you can use <a href="http://patches.kernelcare.com/downloads/nagios/check_kcare" target="_blank" rel="noopener noreferrer">http://patches.kernelcare.com/downloads/nagios/check_kcare<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> script by modifying KEY_KCARE_NAGIOS_ENDPOINT in it to point to your server (change <a href="https://cln.cloudlinux.com/clweb" target="_blank" rel="noopener noreferrer">https://cln.cloudlinux.com/clweb<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> with <a href="https://yourserver/admin" target="_blank" rel="noopener noreferrer">https://yourserver/admin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ).</p> <ul><li>Please, note that access using PARTNER_LOGIN/TOKEN is not supported by KernelCare.ePortal.</li></ul></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/reseller_partner_ui/" class="prev">
          Reseller Partner UI
        </a></span> <span class="next"><a href="/kcare-nexpose/">
          Kcare-nexpose
        </a>
        →
      </span></p></div> </div> <div class="footer" data-v-675e349c><div data-v-675e349c><a href="https://cloudlinux.com" data-v-675e349c><img src="/we-are-cloudlinux.svg" alt="We are Cloudlinux" data-v-675e349c></a></div> <div data-v-675e349c>2018. CloudLinux Inc</div> <div data-v-675e349c><div data-v-675e349c><a href="#" target="_blank" data-v-675e349c>How to</a></div><div data-v-675e349c><a href="#" target="_blank" data-v-675e349c>Getting started</a></div><div data-v-675e349c><a href="https://cloudlinux.zendesk.com/hc/en-us/requests/new" target="_blank" data-v-675e349c>Contact support</a></div><div data-v-675e349c><a href="https://www.cloudlinux.com/kernelcare-blog" target="_blank" data-v-675e349c>Blog</a></div></div> <div class="social" data-v-675e349c><span data-v-675e349c>Stay in touch</span> <a href="https://www.facebook.com/kernelcare/" target="_blank" data-v-675e349c><img src="/fb.svg" data-v-675e349c></a><a href="https://twitter.com/kernelcare" target="_blank" data-v-675e349c><img src="/tw.svg" data-v-675e349c></a><a href="https://linkedin.com/company/cloudlinux" target="_blank" data-v-675e349c><img src="/in.svg" data-v-675e349c></a><a href="https://www.youtube.com/channel/UCZ3YMHWnMP7TaxlXVay5-aw" target="_blank" data-v-675e349c><img src="/ytube.svg" data-v-675e349c></a></div></div> <!----></div></div>
    <script src="/assets/js/15.ca99983e.js" defer></script><script src="/assets/js/5.21f72955.js" defer></script><script src="/assets/js/app.bcc46952.js" defer></script>
  </body>
</html>
